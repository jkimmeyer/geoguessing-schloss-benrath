import Head from 'next/head'
import SbButton from '../components/SbButton/SbButton';
import SbIcon from '../components/SbIcon/SbIcon';
import Page from '../layouts/Page';
import { ButtonType, IconNames } from '../types';
import '../config/i18n';
import { useTranslation } from 'react-i18next';
import prisma from '../config/prisma';
import { GetServerSideProps } from 'next';

export const getServerSideProps: GetServerSideProps = async () => {
  const ranking = await prisma.ranking.findMany();

  return {
    props: {
      ranking
    },
  };
};

interface RankingProps {
  id: string,
  playerName: string,
  score: number,
}

type Props = {
  ranking: RankingProps[];
};

export default function Home(props: Props) {
  const { t } = useTranslation();

  return (
    <div>
      <Head>
        <title>Geoguessing Schloss Benrath</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <Page>
        <SbButton
          buttonType={ButtonType.Primary}
          onClick={() => console.log("Link")}
          icon={
            <SbIcon icon={IconNames.Back} />
          }
        >
          Zur√ºck zur Website
        </SbButton>
        {props.ranking.map((rank) => (

          <div key={rank.id}>
              {rank.playerName}
          </div>

        ))}
      </Page>
    </div>
  )
}
